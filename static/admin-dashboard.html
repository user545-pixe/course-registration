<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/admin.css">
</head>
<body class="admin-body">
    <div class="admin-header">
        <div class="admin-header-title">
            <h1>Course Registration Admin</h1>
        </div>
        <div class="admin-nav">
            <ul>
                <li><a href="admin-dashboard.html" class="active">Dashboard</a></li>
                <li><a href="#" onclick="alert('This is a static demo')">Courses</a></li>
                <li><a href="#" onclick="alert('This is a static demo')">Admins</a></li>
                <li><a href="#" onclick="alert('This is a static demo')">Settings</a></li>
                <li><a href="admin.html">Logout</a></li>
            </ul>
        </div>
    </div>

    <div class="admin-container">
        <div class="dashboard-stats">
            <div class="stat-card">
                <h3>Total Orders</h3>
                <div class="stat-number">3</div>
            </div>
            <div class="stat-card">
                <h3>Pending</h3>
                <div class="stat-number">2</div>
            </div>
            <div class="stat-card">
                <h3>Approved</h3>
                <div class="stat-number">1</div>
            </div>
            <div class="stat-card">
                <h3>Rejected</h3>
                <div class="stat-number">0</div>
            </div>
        </div>

        <div class="dashboard-content">
            <div class="orders-section">
                <div class="section-header">
                    <h2>Recent Orders</h2>
                    <div class="filter-controls">
                        <select id="statusFilter" onchange="filterOrders()">
                            <option value="all">All Status</option>
                            <option value="pending">Pending</option>
                            <option value="approved">Approved</option>
                            <option value="rejected">Rejected</option>
                        </select>
                        <input type="text" id="searchInput" placeholder="Search..." onkeyup="filterOrders()">
                    </div>
                </div>
                
                <div class="orders-table-wrapper">
                    <table class="orders-table">
                        <thead>
                            <tr>
                                <th>Reg #</th>
                                <th>Name</th>
                                <th>Course</th>
                                <th>Email</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTableBody">
                            <!-- Sample static data that will be populated by JS -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Order Detail Modal -->
    <div id="orderModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h2>Order Details</h2>
            <div id="modalContent">
                <!-- Content will be loaded here via JS -->
            </div>
        </div>
    </div>

    <script>
        // Sample order data for demo
        const sampleOrders = [
            {
                id: '1',
                registrationNumber: '10001',
                fullName: 'John Smith',
                email: 'john@example.com',
                phone: '555-123-4567',
                courseName: 'Web Development Bootcamp',
                transactionId: 'TX123456789',
                createdAt: '2025-03-15',
                status: 'approved',
                eventDate: 'June 15, 2025',
                eventVenue: 'XYZ Conference Center, Room 201'
            },
            {
                id: '2',
                registrationNumber: '10002',
                fullName: 'Sarah Johnson',
                email: 'sarah@example.com',
                phone: '555-987-6543',
                courseName: 'Mobile App Development',
                transactionId: 'TX987654321',
                createdAt: '2025-03-17',
                status: 'pending',
                eventDate: 'July 1, 2025',
                eventVenue: 'XYZ Conference Center, Room 305'
            },
            {
                id: '3',
                registrationNumber: '10003',
                fullName: 'Michael Brown',
                email: 'michael@example.com',
                phone: '555-456-7890',
                courseName: 'Data Science Fundamentals',
                transactionId: 'TX567891234',
                createdAt: '2025-03-18',
                status: 'pending',
                eventDate: 'June 20, 2025',
                eventVenue: 'Tech Hub, Building A, Floor 3'
            }
        ];
        
        // Populate orders table
        function populateOrdersTable() {
            const tableBody = document.getElementById('ordersTableBody');
            tableBody.innerHTML = '';
            
            sampleOrders.forEach(order => {
                const row = document.createElement('tr');
                row.className = `order-row status-${order.status}`;
                row.setAttribute('data-status', order.status);
                
                row.innerHTML = `
                    <td>${order.registrationNumber}</td>
                    <td>${order.fullName}</td>
                    <td>${order.courseName}</td>
                    <td>${order.email}</td>
                    <td>${new Date(order.createdAt).toLocaleDateString()}</td>
                    <td>
                        <span class="status-badge ${order.status}">
                            ${order.status}
                        </span>
                    </td>
                    <td class="actions-cell">
                        <button onclick="viewOrder('${order.id}')" class="action-btn view-btn">
                            View
                        </button>
                        
                        ${order.status === 'pending' ? `
                            <button onclick="approveOrder('${order.id}')" class="action-btn approve-btn">
                                Approve
                            </button>
                            <button onclick="rejectOrder('${order.id}')" class="action-btn reject-btn">
                                Reject
                            </button>
                        ` : ''}
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        // Filter orders based on status and search input
        function filterOrders() {
            const statusFilter = document.getElementById('statusFilter').value;
            const searchInput = document.getElementById('searchInput').value.toLowerCase();
            const rows = document.querySelectorAll('.order-row');
            
            rows.forEach(row => {
                const status = row.getAttribute('data-status');
                const text = row.textContent.toLowerCase();
                
                // Show/hide based on status filter
                const statusMatch = statusFilter === 'all' || status === statusFilter;
                
                // Show/hide based on search text
                const textMatch = searchInput === '' || text.includes(searchInput);
                
                if (statusMatch && textMatch) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }
        
        // View order details
        function viewOrder(orderId) {
            const modal = document.getElementById('orderModal');
            const modalContent = document.getElementById('modalContent');
            
            // Show modal
            modal.style.display = 'block';
            
            // Find order from sample data
            const order = sampleOrders.find(o => o.id === orderId);
            
            if (order) {
                modalContent.innerHTML = `
                    <div class="order-detail">
                        <div class="order-detail-header">
                            <div class="order-number">
                                <span>Registration #:</span>
                                <strong>${order.registrationNumber}</strong>
                            </div>
                            <div class="order-status status-${order.status}">
                                ${order.status.toUpperCase()}
                            </div>
                        </div>
                        
                        <div class="order-detail-section">
                            <h3>Personal Information</h3>
                            <div class="detail-grid">
                                <div class="detail-item">
                                    <label>Full Name:</label>
                                    <span>${order.fullName}</span>
                                </div>
                                <div class="detail-item">
                                    <label>Email:</label>
                                    <span>${order.email}</span>
                                </div>
                                <div class="detail-item">
                                    <label>Phone:</label>
                                    <span>${order.phone}</span>
                                </div>
                                <div class="detail-item">
                                    <label>Registration Date:</label>
                                    <span>${new Date(order.createdAt).toLocaleString()}</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="order-detail-section">
                            <h3>Course Information</h3>
                            <div class="detail-grid">
                                <div class="detail-item">
                                    <label>Course:</label>
                                    <span>${order.courseName}</span>
                                </div>
                                <div class="detail-item">
                                    <label>Event Date:</label>
                                    <span>${order.eventDate}</span>
                                </div>
                                <div class="detail-item">
                                    <label>Event Venue:</label>
                                    <span>${order.eventVenue}</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="order-detail-section">
                            <h3>Payment Information</h3>
                            <div class="detail-grid">
                                <div class="detail-item">
                                    <label>Transaction ID:</label>
                                    <span>${order.transactionId}</span>
                                </div>
                            </div>
                            <div class="receipt-image">
                                <h4>Payment Receipt</h4>
                                <img src="images/sample-receipt.jpg" alt="Payment Receipt">
                            </div>
                        </div>
                        
                        ${order.status === 'pending' ? `
                        <div class="order-actions">
                            <button onclick="approveOrder('${order.id}')" class="action-btn approve-btn">
                                Approve Order
                            </button>
                            <button onclick="rejectOrder('${order.id}')" class="action-btn reject-btn">
                                Reject Order
                            </button>
                        </div>
                        ` : ''}
                    </div>
                `;
            } else {
                modalContent.innerHTML = `<p class="error">Order not found</p>`;
            }
        }
        
        // Approve order (demo)
        function approveOrder(orderId) {
            if (confirm('Are you sure you want to approve this order?')) {
                // Find and update order
                const order = sampleOrders.find(o => o.id === orderId);
                if (order) {
                    order.status = 'approved';
                    
                    // Close modal and refresh table
                    closeModal();
                    populateOrdersTable();
                    
                    // Show success message
                    alert('Order approved successfully');
                }
            }
        }
        
        // Reject order (demo)
        function rejectOrder(orderId) {
            if (confirm('Are you sure you want to reject this order?')) {
                // Find and update order
                const order = sampleOrders.find(o => o.id === orderId);
                if (order) {
                    order.status = 'rejected';
                    
                    // Close modal and refresh table
                    closeModal();
                    populateOrdersTable();
                    
                    // Show success message
                    alert('Order rejected successfully');
                }
            }
        }
        
        // Close modal
        function closeModal() {
            document.getElementById('orderModal').style.display = 'none';
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('orderModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', () => {
            // Populate orders table
            populateOrdersTable();
        });
    </script>
</body>
</html> 